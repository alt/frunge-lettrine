%%
%% This is file `frunge-lettrine.sty',
%% generated with the docstrip utility.
%%
%% The original source files were:
%%
%% frunge-lettrine.dtx  (with options: `package')
%% 
%% EXPERIMENTAL CODE
%% 
%% Do not distribute this file without also distributing the
%% source files specified above.
%% 
%% Do not distribute a modified version of this file under the same name.
%% 
%% File: frunge-lettrine.dtx by Arno Trautmann, mail: arno dot trautmann at gmx dot de
\RequirePackage{ifthen}
\newboolean{frlet@disable}
\newboolean{frlet@thinline}
\newboolean{frlet@draft}
\setboolean{frlet@disable}{false}
\setboolean{frlet@thinline}{false}
\setboolean{frlet@draft}{false}

\def\frlet@colori{black}
\def\frlet@colorii{red}
\def\frlet@linethickness{.1pt}
\def\frlet@lines{2}
\def\frlet@kern@ornament{-.2em}
\def\frlet@raise@ornament{.2ex}
\def\frlet@linedepth{0pt}

\RequirePackage{xkeyval}
\DeclareOptionX{disable}{\setboolean{frlet@disable}{true}}
\DeclareOptionX{thinline}{%
  \setboolean{frlet@thinline}{true}%
  \def\frlet@linethickness{#1}%
}
\DeclareOptionX{draft}{\setboolean{frlet@draft}{true}}
\DeclareOptionX{random}{\def\frlet@random{#1}}
\DeclareOptionX{font}{\def\frlet@font{#1}}
\DeclareOptionX{maincolor}{\def\frlet@colori{#1}}
\DeclareOptionX{ornamentcolor}{\def\frlet@colorii{#1}}
\DeclareOptionX{lines}{\def\frlet@lines{#1}}
\DeclareOptionX{depth}{\def\frlet@linedepth{#1}}
\ProcessOptionsX
\iffrlet@disable%
  \endinput%
\fi%
\RequirePackage{
  lettrine,
  ulem
}
\setcounter{DefaultLines}{\frlet@lines}
\def\frletsetlines#1{\setcounter{DefaultLines}{#1}}
\def\frlet@capital{\frlet@c@pital}
\def\frlet@c@pital#1#2{%
  \vspace{-\the\skip12}  %% this is baselineskip!
  \frlet@before%
  \lettrine{%
      \iffrlet@draft\else
        \hbox to 0cm{%
          \fontspec{\frlet@font_ornaments1}\color{\frlet@colorii}%
            \kern\frlet@kern@ornament%
            \raisebox{\frlet@raise@ornament}{#1}%
        }%
      \fi
        \fontspec{\frlet@font}\color{\frlet@colori}#1}%
      {}%
  \iffrlet@draft
    #2\unskip
  \else
    \MakeUppercase{\uline{#2}}%
  \fi
  \frlet@after%
}
\def\frlet@after{}%
\def\frlet@before{}%
\newcommand{\raiseornament}[1]{\def\frlet@raise@ornament{#1}}
\newcommand{\kernbeforelettrine}[1]{}
\newcommand{\kernafterlettrine}[1]{}
\newcommand{\kernornament}[1]{\def\frlet@kern@ornament{#1}}
\AtBeginDocument{%
  \def\neweverypar{\everypar={\everypar={\neweverypar\frlet@capital}}}%
  \everypar={\neweverypar\frlet@capital}%
  \let\@Startsection\@startsection
  \def\@startsection{%
  \everypar{}%
  \@Startsection}%
  \let\@Xsect\@xsect%
  \def\@xsect#1{%
  \@Xsect{#1}%
  \everypar\expandafter{\the\everypar\neweverypar\frlet@capital}%
  \ignorespaces}%
}
\def\disablefrlet{\def\frlet@capital{}}
\def\enablefrlet{\def\frlet@capital{\frlet@c@pital}\everypar\expandafter{\the\everypar\neweverypar\frlet@capital}}
\iffrlet@draft\else
  \iffrlet@thinline%
    \renewcommand{\ULthickness}{\frlet@linethickness}
    \def\ULdepth{\frlet@linedepth}
    \def\frlet@after{\uline}
  \fi
\fi
%% 
%%
%% End of file `frunge-lettrine.sty'.
